


{% extends 'loja/base.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'loja/css/produto-detalhe.css' %}">
{% endblock %}


{% block content %}

<div class="produto-wrapper">

    <!-- LADO ESQUERDO: FOTOS -->
    <div class="galeria-fotos">
        <div class="foto-principal">
            {% if produto.imagem %}
                <img src="{{ produto.imagem.url }}" alt="{{ produto.nome }}">
            {% else %}
                <div class="sem-foto-placeholder">Sem Foto</div>
            {% endif %}
        </div>

        <!-- EspaÃ§o para miniaturas (se vocÃª criar um model de fotos extras depois) -->
        <div class="miniaturas">
            <!-- Exemplo estÃ¡tico: -->
            <!-- <img src="..." class="miniatura"> -->
        </div>
    </div>

    <!-- LADO DIREITO: TEXTOS -->
    <div class="info-produto">
        <div class="prod-categoria">{{ produto.categoria.nome }}</div>
        <h1 class="prod-titulo">{{ produto.nome }}</h1>
        <div class="prod-preco">R$ {{ produto.preco }}</div>
        <div class="botoes-acao">
            <!-- BotÃ£o Adicionar ao Carrinho -->
            <form action="{% url 'carrinho_adicionar' produto.id %}" method="post" class="form-btn-acao">
                {% csrf_token %}
                <button type="submit" class="btn-grandao btn-sacola">
                    Adicionar ao Carrinho
                </button>
            </form>

            <!-- BotÃ£o Comprar (WhatsApp) -->
            <a href="https://wa.me/5593992434424?text=OlÃ¡! Quero comprar: {{ produto.nome }} (R$ {{ produto.preco }})" target="_blank" class="btn-grandao btn-compra">
                Comprar Agora
            </a>
        </div>

        <div class="prod-descricao">
            <!-- Usa linebreaks para manter os parÃ¡grafos do texto -->
            {{ produto.descricao|linebreaks }}
        </div>


    </div>
</div>

<!-- CATÃLOGO ABAIXO DO DETALHE (PRODUTOS RELACIONADOS) -->
{% if relacionados %}
<div class="catalogo-wrapper relacionados-wrapper">

    <h2 class="titulo-sessao">VocÃª tambÃ©m pode gostar</h2>

    <div class="grid-produtos">
        {% for p in relacionados %}
            <div class="card-produto">
                <!-- Imagem com link -->
                <div class="card-img-wrapper">
                    <a href="{% url 'produto_detalhe' p.id %}" class="link-img-produto">
                        {% if p.imagem %}
                            <img src="{{ p.imagem.url }}" alt="{{ p.nome }}">
                        {% else %}
                            <span class="sem-foto-texto">Sem Foto</span>
                        {% endif %}
                    </a>
                </div>

                <!-- ConteÃºdo -->
                <div class="card-content">
                    <div class="card-category">{{ p.categoria.nome }}</div>

                    <h3 class="card-title">
                        <a href="{% url 'produto_detalhe' p.id %}" class="link-titulo-produto">
                            {{ p.nome }}
                        </a>
                    </h3>

                    <div class="card-price-row">
                        <span class="card-price">R$ {{ p.preco }}</span>
                    </div>

                    <div class="card-actions">
                        <!-- Adicionar ao carrinho -->
                        <form action="{% url 'carrinho_adicionar' p.id %}" method="post" class="form-add-cart">
                            {% csrf_token %}
                        <input type="hidden" name="next" value="{{ request.get_full_path }}">
                        <button type="submit" class="btn-action btn-cart" title="Adicionar ao Carrinho">
                             ðŸ›’
                         </button>
                        </form>


                        <!-- Comprar via WhatsApp -->
                        <a href="https://wa.me/5593992434424?text=OlÃ¡! Gostei do produto: {{ p.nome }} (R$ {{ p.preco }})"
                           class="btn-action btn-buy" target="_blank">
                           Comprar
                        </a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

</div>
{% endif %}



{% endblock %}
